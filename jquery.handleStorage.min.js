/* https://www.github.com/jas-/jQuery.handleStorage */
(function(a){a.fn.handleStorage=function(d){var l={appID:"jQuery.handleStorage",storage:"localStorage",interval:5000,aes:false,uuid:"",form:"",data:{},callback:function(){},preCallback:function(){},errCallback:function(){}};var x={init:function(z){var y=a.extend({},l,z);y.form=a(this).attr("id");if(n(y)){y.data[y.appID]=(e(y))?e(y):{};var A=c(y);if((typeof A==="object")&&(i(A)>0)){u(y,A)}((y.preCallback)&&(a.isFunction(y.preCallback)))?y.preCallback(a(this)):false;a("#"+y.form).delegate("input, input:radio:selected, input:checkbox:checked, textarea","change keyup blur submit",function(){g(y)});setInterval(function(){g(y)},y.interval);return true}else{return false}}};var i=function(y){var z=0;a.each(y,function(B,A){if(y.hasOwnProperty(B)){z++}});return z};var r=function(B,A,z){var y=false;B=(b(B))?B:"cookie";switch(B){case"localStorage":y=p(A,z);break;case"sessionStorage":y=j(A,z);break;case"cookie":y=v(A,z);break;default:y=p(A,z);break}return y};var o=function(A,z){var y=false;A=(b(A))?A:"cookie";switch(A){case"localStorage":y=k(z);break;case"sessionStorage":y=h(z);break;case"cookie":y=t(z);break;default:y=k(z);break}return y};var p=function(z,y){return(localStorage.setItem(z,y))?false:true};var j=function(z,y){return(sessionStorage.setItem(z,y))?false:true};var v=function(z,y){if(typeof a.cookie==="function"){return(a.cookie(z,y,{expires:7}))?true:false}else{return false}};var k=function(y){return(localStorage.getItem(y))?localStorage.getItem(y):false};var h=function(y){return(sessionStorage.getItem(y))?sessionStorage.getItem(y):false};var t=function(y){if(typeof a.cookie==="function"){return(a.cookie(y))?a.cookie(y):false}else{return false}};var e=function(y){return(o(y.storage,y.appID))?JSON.parse(o(y.storage,y.appID)):false};var c=function(A){var z={},y;if(typeof A.data[A.appID][A.form]==="object"){a.each(a("#"+A.form+" > :input"),function(C,B){if((q(B.name)!==false)&&(q(A.data[A.appID][A.form][B.name])!==false)){z[B.name]=((A.aes)&&(A.data[A.appID][A.form]["uuid"])&&(y!==false))?GibberishAES.dec(A.data[A.appID][A.form][B.name],f(A.data[A.appID][A.form]["uuid"])):A.data[A.appID][A.form][B.name]}})}return z};var u=function(z,y){if(i(y)>0){a.each(y,function(B,A){if((a("#"+z.form+" > input[name="+B+"]").attr("name")===B)||(a("#"+z.form+" > select[name="+B+"]").attr("name")===B)||(a("#"+z.form+" > textarea[name="+B+"]").attr("name")===B)&&(q(A)!==false)){a("#"+z.form+" > input[name="+B+"], #"+z.form+" > select[name="+B+"], #"+z.form+" > textarea[name="+B+"]").val(A)}})}};var g=function(z){var y={};y[z.form]={};y[z.form]["uuid"]=((z.aes)&&(!z.uuid))?w(z):z.uuid;a.each(a("#"+z.form+" > :input"),function(B,A){if((q(A.value)!==false)&&(q(A.name)!==false)){y[z.form][A.name]=((z.aes)&&(y[z.form]["uuid"]))?GibberishAES.enc(A.value,f(y[z.form]["uuid"])):A.value}});z.data[z.appID]=(i(z.data[z.appID])>0)?a.extend({},z.data[z.appID],y):y;if(r(z.storage,z.appID,JSON.stringify(z.data[z.appID]))){((z.callback)&&(a.isFunction(z.callback)))?z.callback.call(a(this)):false}else{((z.errCallback)&&(a.isFunction(z.errCallback)))?z.errCallback.call(a(this)):false}};var q=function(y){if(y){return((y===false)||(y.length===0)||(!y)||(y===null)||(y==="")||(typeof y==="undefined"))?false:true}else{return false}};var b=function(y){try{return((y in window)&&(window[y]))?true:false}catch(z){return false}};var n=function(z){var y=true;if(z.aes){if(!a.isFunction(GibberishAES.enc)){console.log("AES use specified but required libraries not available.Please include the Gibberish-AES libs...");y=false}}if(z.storage==="cookie"){if(!a.isFunction(a.cookie)){console.log("Cookie use specified but required libraries not available.Please include the jQuery cookie plugin...");y=false}}return y};var s=function(y){var D="0123456789abcdef".split("");var B=[],A=Math.random,C;B[8]=B[13]=B[18]=B[23]="-";B[14]="4";for(var z=0;z<36;z++){if(!B[z]){C=0|A()*16;B[z]=D[(z==19)?(C&3)|8:C&15]}}return(y!==null)?B.join("").replace(/-/g,"").split("",y).join(""):B.join("")};var w=function(A){if(A.aes){var z=(e(A))?e(A):{};z[A.form]=(z[A.form])?z[A.form]:{};var B=(q(z[A.form]["uuid"]))?z[A.form]["uuid"]:s(null);return B}return false};var f=function(y){return(y)?encodeURI(y.replace(/-/gi,"").substring(16,Math.ceil(16*y.length)%y.length)):false};var m=function(y){a.each(y,function(z,A){if(typeof A==="object"){m(A)}else{console.log(z+" => "+A)}})};if(x[d]){return x[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof d==="object")||(!d)){return x.init.apply(this,arguments)}else{a.error("Method "+d+" does not exist on "+opts.name)}}}})(jQuery);